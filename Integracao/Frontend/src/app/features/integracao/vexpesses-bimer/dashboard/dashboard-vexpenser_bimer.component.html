<div class="dashboard-container">
  <h1 class="dashboard-title">Dashboard VExpenses x Bimer - VisÃ£o Geral</h1>

  <!-- ğŸ”¹ SeÃ§Ã£o: KPIs -->
  <div class="dashboard-kpi-container">
    <!-- ğŸ”„ Card Pagos -->
    <div class="dashboard-kpi-card kpi-pago" [class.loading]="carregandoPagos">
      <h2>RelatÃ³rio - VExpenses <span class="status-destaque">Pagos</span></h2>
      <p>{{ totalPago }}</p>
      <button class="card-btn" (click)="onClickCardPago($event)" [disabled]="carregandoPagos">
        <ng-container *ngIf="!carregandoPagos">ğŸ”„ Atualizar Status</ng-container>
        <ng-container *ngIf="carregandoPagos">â³ Atualizando...</ng-container>
      </button>
      <div class="card-info pago" *ngIf="dataUltimaAtualizacaoPagos">
        Atualizado: {{ dataUltimaAtualizacaoPagos }}
      </div>
    </div>

    <!-- ğŸ”„ Card Aprovados -->
    <div class="dashboard-kpi-card kpi-aprovados" [class.loading]="carregandoAprovados">
      <h2>RelatÃ³rio - VExpenses <span class="status-destaque">Aprovados</span></h2>
      <p>{{ totalAprovados }}</p>
      <button class="card-btn" (click)="onClickCardAprovados($event)" [disabled]="carregandoAprovados">
        <ng-container *ngIf="!carregandoAprovados">ğŸ”„ Atualizar Status</ng-container>
        <ng-container *ngIf="carregandoAprovados">â³ Atualizando...</ng-container>
      </button>
      <div class="card-info aprovados" *ngIf="dataUltimaAtualizacaoAprovados">
        Atualizado: {{ dataUltimaAtualizacaoAprovados }}
      </div>
    </div>

    <!-- ğŸ”„ Card Abertos -->
    <div class="dashboard-kpi-card kpi-abertos" [class.loading]="carregandoAbertos">
      <h2>RelatÃ³rio - VExpenses <span class="status-destaque">Abertos</span></h2>
      <p>{{ totalAbertos }}</p>
      <button class="card-btn" (click)="onClickCardAbertos($event)" [disabled]="carregandoAbertos">
        <ng-container *ngIf="!carregandoAbertos">ğŸ”„ Atualizar Status</ng-container>
        <ng-container *ngIf="carregandoAbertos">â³ Atualizando...</ng-container>
      </button>
      <div class="card-info abertos" *ngIf="dataUltimaAtualizacaoAbertos">
        Atualizado: {{ dataUltimaAtualizacaoAbertos }}
      </div>
    </div>

    <!-- ğŸ”„ Card Enviados -->
    <div class="dashboard-kpi-card kpi-enviados" [class.loading]="carregandoEnviados">
      <h2>RelatÃ³rio - VExpenses <span class="status-destaque">Enviados</span></h2>
      <p>{{ totalEnviados }}</p>
      <button class="card-btn" (click)="onClickCardEnviados($event)" [disabled]="carregandoEnviados">
        <ng-container *ngIf="!carregandoEnviados">ğŸ”„ Atualizar Status</ng-container>
        <ng-container *ngIf="carregandoEnviados">â³ Atualizando...</ng-container>
      </button>
      <div class="card-info enviados" *ngIf="dataUltimaAtualizacaoEnviados">
        Atualizado: {{ dataUltimaAtualizacaoEnviados }}
      </div>
    </div>

    <!-- ğŸ”„ Card Reabertos -->
    <div class="dashboard-kpi-card kpi-reabertos" [class.loading]="carregandoReabertos">
      <h2>RelatÃ³rio - VExpenses <span class="status-destaque">Reabertos</span></h2>
      <p>{{ totalReabertos }}</p>
      <button class="card-btn" (click)="onClickCardReabertos($event)" [disabled]="carregandoReabertos">
        <ng-container *ngIf="!carregandoReabertos">ğŸ”„ Atualizar Status</ng-container>
        <ng-container *ngIf="carregandoReabertos">â³ Atualizando...</ng-container>
      </button>
      <div class="card-info reabertos" *ngIf="dataUltimaAtualizacaoReabertos">
        Atualizado: {{ dataUltimaAtualizacaoReabertos }}
      </div>
    </div>

    <!-- ğŸ”„ Card Reprovados -->
    <div class="dashboard-kpi-card kpi-reprovados" [class.loading]="carregandoReprovados">
      <h2>RelatÃ³rio - VExpenses <span class="status-destaque">Reprovados</span></h2>
      <p>{{ totalReprovados }}</p>
      <button class="card-btn" (click)="onClickCardReprovados($event)" [disabled]="carregandoReprovados">
        <ng-container *ngIf="!carregandoReprovados">ğŸ”„ Atualizar Status</ng-container>
        <ng-container *ngIf="carregandoReprovados">â³ Atualizando...</ng-container>
      </button>
      <div class="card-info reprovados" *ngIf="dataUltimaAtualizacaoReprovados">
        Atualizado: {{ dataUltimaAtualizacaoReprovados }}
      </div>
    </div>
  </div>

  <!-- ğŸ”¹ SeÃ§Ã£o: GrÃ¡ficos principais -->
  <h2 class="dashboard-section-title">
    Processamento da IntegraÃ§Ã£o de Dados - VExpenses Ã— Bimer
  </h2>
  <div class="dashboard-charts-container">
    <div class="dashboard-chart-card">
      <h3>PendÃªncias por MÃªs</h3>
      <canvas baseChart [data]="chartPendenciasData" [options]="lineChartOptions" type="line"></canvas>
    </div>

    <div class="dashboard-chart-card">
      <h3>PendÃªncias Resolvidas por MÃªs</h3>
      <canvas baseChart [data]="chartPendenciasResolvidasData" [options]="lineChartOptions" type="line"></canvas>
    </div>

    <div class="dashboard-chart-card">
      <h3>Erros por MÃªs</h3>
      <canvas baseChart [data]="chartErrosData" [options]="lineChartOptions" type="line"></canvas>
    </div>

    <div class="dashboard-chart-card">
      <h3>Sucesso por MÃªs</h3>
      <canvas baseChart [data]="chartSucessoData" [options]="lineChartOptions" type="line"></canvas>
    </div>

    <div class="dashboard-chart-card">
      <h3>Processamento por MÃªs (Combinado)</h3>
      <canvas baseChart [data]="chartProcessamentoLinhaData" [options]="lineChartOptions" type="line"></canvas>
    </div>

    <div class="dashboard-chart-card">
      <h3>Comparativo: PendÃªncias Ã— Erros Ã— Sucesso</h3>
      <canvas baseChart [data]="chartComparativoData" [options]="barChartUsersOptions" type="bar"></canvas>
    </div>

    <div class="dashboard-chart-card">
      <h3>Comparativo Geral de Processamento</h3>
      <canvas baseChart [data]="chartTotalComparativoData" [options]="barChartUsersOptions" type="bar"></canvas>
    </div>
  </div>

  <div class="dashboard-triple-chart-grid">
    <div class="dashboard-chart-card pizza-chart-card">
      <h3>Monitoramento de PendÃªncias por Status</h3>
      <canvas
        *ngIf="chartPendenciasStatusPizzaData?.datasets?.length"
        baseChart
        [data]="chartPendenciasStatusPizzaData"
        [options]="pieChartOptions"
        type="pie"
      ></canvas>
    </div>

    <div class="dashboard-chart-card pizza-chart-card">
      <h3>Monitoramento de PendÃªncias Resolvidas por UsuÃ¡rios</h3>
      <canvas
        *ngIf="chartPendenciasExcluidasPorUsuariosPizzaData?.datasets?.length"
        baseChart
        [data]="chartPendenciasExcluidasPorUsuariosPizzaData"
        [options]="pieChartOptions"
        type="pie"
      ></canvas>
    </div>

    <div class="dashboard-chart-card pizza-chart-card">
      <h3>Monitoramento de Erros</h3>
      <canvas
        *ngIf="chartErrosPizzaData?.datasets?.length"
        baseChart
        [data]="chartErrosPizzaData"
        [options]="pieChartOptions"
        type="pie"
      ></canvas>
    </div>
  </div>
</div>
